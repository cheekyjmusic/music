<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Search</title>
    <link rel="icon" href="https://raw.githubusercontent.com/cheekyjmusic/music/main/assets/logo.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Prompt', sans-serif;
            margin: 0;
            padding: 10px;
            background-color: black;
            color: white;
        }
        .title-container img{
            filter: invert(100%);
            height: 30px;
            width: auto;
        }
        .title-container {
            display: flex;
            align-items: center;
            margin-top: 20px;
        }
        .title-container h1{
            margin-left: 10px;
        }
        .search {
            background-color: white;
            color: black;
            outline: 5px black solid;
            width: 100%;
            height: 20px;
            border-radius: 20px;
            margin-left: 10px;
        }
        .error h1{
            font-size: 8vw;
            color: white;
        }
        .error {
            height: 50vh;
            opacity: 0;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://cheekyjmusic.github.io/music/player.css">
    <link rel="stylesheet" type="text/css" href="https://cheekyjmusic.github.io/music/menu.css">
</head>
<body>
    <div class="menu-button">
        <img class="menu-button-img" onclick="toggleMenu()" src="https://static.thenounproject.com/png/3869892-200.png">
    </div>
    <div class="menu-container">
        <a style="text-decoration: none;" href="http://cheekyjmusic.github.io/music"><div style="margin-top: 50px;" class="menu-item">
            <img src="https://raw.githubusercontent.com/cheekyjmusic/music/main/assets/logo.png">
            <h1>Menu</h1>
        </div></a>
        <a style="text-decoration: none;" href="https://cheekyjmusic.github.io/music/search.html"><div style="margin-top: 10px;" class="menu-item">
            <img src="https://cdn-icons-png.flaticon.com/512/3031/3031293.png">
            <h1>Search</h1>
        </div></a>
        <a style="text-decoration: none;" href="https://cheekyjmusic.github.io/music/credits.txt"><div style="margin-top: 10px;" class="menu-item">
            <img src="https://cdn-icons-png.flaticon.com/512/864/864685.png">
            <h1>Credits</h1>
        </div></a>
        <a style="text-decoration: none;" href="https://cheekyjmusic.github.io/music/singles.html"><div style="margin-top: 10px;" class="menu-item">
            <img src="https://cdn-icons-png.flaticon.com/512/1705/1705062.png">
            <h1>Discography</h1>
        </div></a>
        <div onclick="fullscreen()" style="margin-top: 10px;" class="menu-item">
            <img src="https://cdn-icons-png.flaticon.com/512/3354/3354155.png">
            <h1>Fullscreen</h1>
        </div>
        <a style="text-decoration: none;" href="https://cheekyjmusic.github.io/music/archive.html"><div style="margin-top: 10px;" class="menu-item">
            <img src="https://static.thenounproject.com/png/21032-200.png">
            <h1>Archive</h1>
        </div></a>
        <a style="text-decoration: none;" href="https://github.com/cheekyjmusic/music/issues/new"><div style="margin-top: 10px;" class="menu-item">
            <img src="https://cdn-icons-png.flaticon.com/512/193/193224.png">
            <h1>Report Bug</h1>
        </div></a>
    </div>

    <div onclick="toggleMenu()" class="menu-shadow"></div>

    <div class="title-container">
        <img src="https://cdn-icons-png.flaticon.com/512/3031/3031293.png">
        <h1>Search</h1>
        <input class="search" id="search" type="text" name="search" placeholder="What do you want to listen to?">
    </div>
    <div class="search-results" id="searchResults"></div>


    <div class="error">
        <h1>Nothing Found</h1>
    </div>
    

    <script>
        const songsList = [
    {
        name: 'Omelette'
    },
    {
        name: 'Submarine'
    },
    {
        name: 'Metro Station'
    },
    {
        name: 'Hotdog Stand'
    },
    {
        name: 'Mr Clean'
    },
    {
        name: 'Cheeky Boomin'
    },
    {
        name: "Suburbs Freestyle Remix"
    },
    {
        name: 'Corner Store Twinkie'
    },
    {
        name: '1860s Lincoln'
    },
    {
        name: 'Sumo Wrestler'
    },
    {
        name: 'Tacobell Diss'
    },
    {
        name: 'Suburbs Freestyle'
    },
    {
        name: 'Big Hippo'
    }
];

const searchInput = document.getElementById('search');
const searchResults = document.getElementById('searchResults');
const error = document.querySelector('.error');

searchInput.addEventListener('input', updateSearchResults);

searchInput.addEventListener('keyup', function(event) {
    if (event.key === 'Enter') {
        const searchQuery = searchInput.value.toLowerCase();
        const matchingSongs = songsList.filter(song => song.name.toLowerCase().includes(searchQuery));
        
        if (matchingSongs.length > 0) {
            redirectToSong(matchingSongs.map(song => song.name).join(', '));
        } else {
            error.style.opacity = 1;
        }
    }
});

function updateSearchResults(event) {
    const searchQuery = event.target.value.toLowerCase();
    
    if (searchQuery === '') {
        searchResults.innerHTML = '';
        return;
    }
    
    const matchingSongs = songsList.filter(song => song.name.toLowerCase().includes(searchQuery));
    
    const matchingSongNames = matchingSongs.map(song => song.name);
    
    displaySearchResults(matchingSongNames);
}

function displaySearchResults(results) {
    if (results.length > 0) {
        const resultList = document.createElement('ul');
        
        results.forEach(result => {
            const listItem = document.createElement('li');
            listItem.textContent = result;
            resultList.appendChild(listItem);
        });
        
        searchResults.innerHTML = '';
        searchResults.appendChild(resultList);
    } else {
        searchResults.innerHTML = '';
    }
}

function redirectToSong(songName) {
    if (songName === 'Metro Station' || songName === 'Hotdog Stand' || songName === 'Mr Clean' || songName === 'Cheeky Boomin') {
        window.location.href = 'https://cheekyjmusic.github.io/music/cheekyboomin?loadInSong=' + songName;
    } else {
        window.location.href = 'https://cheekyjmusic.github.io/music/singles?loadInSong=' + songName;
    }
}

    </script>    
    <script src="https://cheekyjmusic.github.io/music/menu.js"></script>
    <script src="https://cheekyjmusic.github.io/music/player.js"></script>
</body>
</html>
